{% set sw = salt['grains.filter_by']({
    'Linux': {
        'virtualbox': 'virtualbox',
        'chromium': 'chromium',
	'vim': 'vim',
	'apache': 'apache',
     },
}, grain='kernel', merge=salt['pillar.get']('sw'))%}


{% set sw = salt['grains.filter_by']({
    'Ubuntu': {
        'virtualbox': 'virtualbox-qt',
        'chromium': 'chromium-browser',
        'firefox': 'firefox',
        'thunderbird': 'thunderbird',
    },
    'Debian': {
        'virtualbox': 'virtualbox-qt',
        'chromium': 'chromium',
        'thunderbird': 'icedove',
        'firefox': 'firefox-esr',
	'apache': 'apache2',
    },
    'RedHat': {
        'virtualbox': 'VirtualBox',
        'firefox': 'firefox',
        'chromium': 'chromium',
	'vim': 'vim-minimal',
	'apache': 'httpd',
        'firefox': 'firefox',
        'thunderbird': 'thunderbird',
    },
    'Arch': {
        'chromium': 'chromium',
        'virtualbox': 'virtualbox',
        'firefox': 'firefox',
        'thunderbird': 'thunderbird',
    },
},  grain="os", merge=sw) %}
